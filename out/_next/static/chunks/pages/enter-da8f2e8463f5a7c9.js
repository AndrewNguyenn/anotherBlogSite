(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{1296:function(a,b,c){var d=0/0,e=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,h=/^0o[0-7]+$/i,i=parseInt,j="object"==typeof c.g&&c.g&&c.g.Object===Object&&c.g,k="object"==typeof self&&self&&self.Object===Object&&self,l=j||k||Function("return this")(),m=Object.prototype.toString,n=Math.max,o=Math.min,p=function(){return l.Date.now()};function q(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function r(a){if("number"==typeof a)return a;if("symbol"==typeof(b=a)||(c=b)&&"object"==typeof c&&"[object Symbol]"==m.call(b))return d;if(q(a)){var b,c,j="function"==typeof a.valueOf?a.valueOf():a;a=q(j)?j+"":j}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(e,"");var k=g.test(a);return k||h.test(a)?i(a.slice(2),k?2:8):f.test(a)?d:+a}a.exports=function(a,b,c){var d,e,f,g,h,i,j=0,k=!1,l=!1,m=!0;if("function"!=typeof a)throw new TypeError("Expected a function");function s(b){var c=d,f=e;return d=e=void 0,j=b,g=a.apply(f,c)}function t(a){var c=a-i;return void 0===i||c>=b||c<0||l&&a-j>=f}function u(){var a,c,d=p();if(t(d))return v(d);h=setTimeout(u,(c=b-((a=d)-i),l?o(c,f-(a-j)):c))}function v(a){return(h=void 0,m&&d)?s(a):(d=e=void 0,g)}function w(){var a,c=p(),f=t(c);if(d=arguments,e=this,i=c,f){if(void 0===h)return j=a=i,h=setTimeout(u,b),k?s(a):g;if(l)return h=setTimeout(u,b),s(i)}return void 0===h&&(h=setTimeout(u,b)),g}return b=r(b)||0,q(c)&&(k=!!c.leading,l="maxWait"in c,f=l?n(r(c.maxWait)||0,b):f,m="trailing"in c?!!c.trailing:m),w.cancel=function(){void 0!==h&&clearTimeout(h),j=0,d=i=e=h=void 0},w.flush=function(){return void 0===h?g:v(p())},w}},4715:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/enter",function(){return c(2643)}])},2643:function(a,b,c){"use strict";c.r(b),c.d(b,{"default":function(){return p}});var d=c(8520),e=c.n(d),f=c(5893),g=c(8403),h=c(5321),i=c(2720),j=c(7294),k=c(8200),l=c(1296),m=c.n(l);function n(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function o(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){n(f,d,e,g,h,"next",a)}function h(a){n(f,d,e,g,h,"throw",a)}g(void 0)})}}function p(a){var a=null!==a?a:function(a){throw a}(new TypeError("Cannot destructure undefined")),b=(0,j.useContext)(k.S),c=b.user,d=b.username;return(0,f.jsx)("main",{children:c?d?(0,f.jsx)(r,{}):(0,f.jsx)(s,{}):(0,f.jsx)(q,{})})}function q(){var a=o(e().mark(function a(){return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,i.rh)(g.I8,g.qV);case 2:case"end":return a.stop()}},a)}));try{return(0,f.jsxs)("button",{className:"btn-google",onClick:a,children:[(0,f.jsx)("img",{src:"/google.png",alt:"an image of google"})," Sign in with Google"]})}catch(b){console.log(b)}}function r(){return(0,f.jsx)("button",{onClick:function(){return(0,i.w7)(g.I8)},children:"Sign Out"})}function s(){var a=(0,j.useState)(""),b=a[0],c=a[1],d=(0,j.useState)(!1),g=d[0],i=d[1],l=(0,j.useState)(!1),n=l[0],p=l[1],q=(0,j.useContext)(k.S),r=q.user,s=q.username;(0,j.useEffect)(function(){v(b)},[b]);var u=o(e().mark(function a(c){var d,f,g;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c.preventDefault(),d=(0,h.JU)((0,h.ad)(),"users",r.uid),f=(0,h.JU)((0,h.ad)(),"usernames",b),g=(0,h.qs)((0,h.ad)()),g.set(d,{username:b,photoURL:r.photoURL,displayName:r.displayName}),g.set(f,{uid:r.uid}),a.next=9,g.commit();case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}},a,null,[[0,11]])})),v=(0,j.useCallback)(m()(o(e().mark(function a(b){var c,d;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(b.length>=3)){a.next=8;break}return c=(0,h.JU)((0,h.ad)(),"usernames",b),a.next=4,(0,h.QT)(c);case 4:d=a.sent,console.log("Firestore read executed",d.exists()),i(!d.exists()),p(!1);case 8:case"end":return a.stop()}},a)})),500),[]);return!s&&(0,f.jsxs)("section",{children:[(0,f.jsx)("h3",{children:"Choose Username"}),(0,f.jsxs)("form",{onSubmit:u,children:[(0,f.jsx)("input",{name:"username",placeholder:"username",value:b,onChange:function(a){var b=a.target.value.toLowerCase();b.length<3&&(c(b),i(!1),p(!1)),/^(?=[a-zA-Z0-9._]{3,15}$)(?!.*[_.]{2})[^_.].*[^_.]$/.test(b)&&(c(b),p(!0),i(!1))}}),(0,f.jsx)(t,{username:b,isValid:g,loading:n}),(0,f.jsx)("button",{type:"submit",className:"btn-green",disabled:!g,children:"Yup"}),(0,f.jsx)("h3",{children:"Debug State"}),(0,f.jsxs)("div",{children:["Username: ",b,(0,f.jsx)("br",{}),"Loading: ",n.toString(),(0,f.jsx)("br",{}),"Username Valid: ",g.toString()]})]})]})}function t(a){var b=a.username,c=a.isValid;return a.loading?(0,f.jsx)("p",{children:"Checking..."}):c?(0,f.jsxs)("p",{className:"text-success",children:[b," is available!"]}):b&&!c?(0,f.jsx)("p",{className:"text-danger",children:"That username is taken!"}):(0,f.jsx)("p",{})}}},function(a){a.O(0,[774,888,179],function(){return a(a.s=4715)}),_N_E=a.O()}])