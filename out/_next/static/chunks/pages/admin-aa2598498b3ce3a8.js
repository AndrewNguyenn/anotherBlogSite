(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{5683:function(a,b,c){var d,e=1/0,f=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,g=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,h="\\ud800-\\udfff",i="\\u2700-\\u27bf",j="a-z\\xdf-\\xf6\\xf8-\\xff",k="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m="['’]",n="["+l+"]",o="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",p="["+j+"]",q="[^"+h+l+"\\d+"+i+j+k+"]",r="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",t="["+k+"]",u="(?:"+p+"|"+q+")",v="(?:"+m+"(?:d|ll|m|re|s|t|ve))?",w="(?:"+m+"(?:D|LL|M|RE|S|T|VE))?",x="(?:"+o+"|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",z="(?:\\u200d(?:"+["[^"+h+"]",r,s].join("|")+")"+y+x+")*",A="(?:"+["["+i+"]",r,s].join("|")+")"+(y+x+z),B=RegExp(m,"g"),C=RegExp(o,"g"),D=RegExp([t+"?"+p+"+"+v+"(?="+[n,t,"$"].join("|")+")","(?:"+t+"|"+q+")+"+w+"(?="+[n,t+u,"$"].join("|")+")",t+"?"+u+"+"+v,t+"+"+w,"\\d+",A].join("|"),"g"),E=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,F="object"==typeof c.g&&c.g&&c.g.Object===Object&&c.g,G="object"==typeof self&&self&&self.Object===Object&&self,H=F||G||Function("return this")(),I=(d={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(a){return null==d?void 0:d[a]}),J=Object.prototype.toString,K=H.Symbol,L=K?K.prototype:void 0,M=L?L.toString:void 0;function N(a){return null==a?"":(function(a){if("string"==typeof a)return a;if("symbol"==typeof(b=a)||(c=b)&&"object"==typeof c&&"[object Symbol]"==J.call(b))return M?M.call(a):"";var b,c,d=a+"";return"0"==d&&1/a== -e?"-0":d})(a)}var O=function(a){return function(b){var c;return(function(a,b,c,d){for(var e=-1,f=a?a.length:0;++e<f;)c=b(c,a[e],e,a);return c})(P(((c=N(c=b))&&c.replace(g,I).replace(C,"")).replace(B,"")),a,"")}}(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()});function P(a,b,c){if(a=N(a),void 0===(b=c?void 0:b)){var d;return(d=a,E.test(d))?a.match(D)||[]:a.match(f)||[]}return a.match(b)||[]}a.exports=O},8860:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return c(1200)}])},9958:function(a,b,c){"use strict";c.d(b,{Z:function(){return h}});var d=c(5893),e=c(1664),f=c(7294),g=c(8200);function h(a){return(0,f.useContext)(g.S).username?a.children:a.fallback||(0,d.jsx)(e.default,{href:"/enter",children:"You must be signed in"})}},2558:function(a,b,c){"use strict";c.d(b,{Z:function(){return f}});var d=c(5893),e=c(1664);function f(a){var b=a.posts,c=a.admin;return b?b.map(function(a){return(0,d.jsx)(g,{post:a,admin:c},a.slug)}):null}function g(a){var b=a.post,c=a.admin,f=null==b?void 0:b.content.trim().split(/\s+/g).length,g=(f/100+1).toFixed(0);return(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)(e.default,{href:"/".concat(b.username),children:(0,d.jsx)("a",{children:(0,d.jsxs)("strong",{children:["By @",b.username]})})}),(0,d.jsx)(e.default,{href:"/".concat(b.username,"/").concat(b.slug),children:(0,d.jsx)("h2",{children:(0,d.jsx)("a",{children:b.title})})}),(0,d.jsxs)("footer",{children:[(0,d.jsxs)("span",{children:[f," words. ",g," min read"]}),(0,d.jsxs)("span",{className:"push-left",children:[" 🤍 ",b.heartCount||0," Hearts"]})]}),void 0!==c&&c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.default,{href:"/admin/".concat(b.slug),children:(0,d.jsx)("h3",{children:(0,d.jsx)("button",{className:"btn-blue",children:"Edit"})})}),b.published?(0,d.jsx)("p",{className:"text-success",children:"Live"}):(0,d.jsx)("p",{className:"text-danger",children:"Unpublished"})]})]})}},1200:function(a,b,c){"use strict";c.r(b),c.d(b,{"default":function(){return u}});var d=c(8520),e=c.n(d),f=c(5893),g=c(4468),h=c.n(g),i=c(9958),j=c(2558),k=c(8200),l=c(8403),m=c(5321),n=c(7294),o=c(1163),p=c(6677),q=c(5683),r=c.n(q),s=c(2620);function t(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function u(a){return(0,f.jsx)("main",{children:(0,f.jsxs)(i.Z,{children:[(0,f.jsx)(v,{}),(0,f.jsx)(w,{})]})})}function v(){var a,b=(0,m.hJ)((0,m.ad)(),"users",l.I8.currentUser.uid,"posts"),c=(0,m.IO)(b,(0,m.Xo)("createdAt")),d=function(a){if(Array.isArray(a))return a}(a=(0,p.Kx)(c))||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return c}(a,1)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),e=d[0],g=null==e?void 0:e.docs.map(function(a){return a.data()});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h1",{children:"Manage your Posts"}),(0,f.jsx)(j.Z,{posts:g,admin:!0})]})}function w(){var a=(0,o.useRouter)(),b=(0,n.useContext)(k.S).username,c=(0,n.useState)(""),d=c[0],g=c[1],i=encodeURI(r()(d)),j=d.length>3&&d.length<100,p=function(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){t(f,d,e,g,h,"next",a)}function h(a){t(f,d,e,g,h,"throw",a)}g(void 0)})}}(e().mark(function c(f){var g,h,j;return e().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return f.preventDefault(),g=l.I8.currentUser.uid,h=(0,m.JU)((0,m.ad)(),"users",g,"posts",i),j={title:d,slug:i,uid:g,username:b,published:!1,content:"# hello world!",createdAt:(0,m.Bt)(),updatedAt:(0,m.Bt)(),heartCount:0},c.next=6,(0,m.pl)(h,j);case 6:s.ZP.success("Post created!"),a.push("/admin/".concat(i));case 8:case"end":return c.stop()}},c)}));return(0,f.jsxs)("form",{onSubmit:p,children:[(0,f.jsx)("input",{value:d,onChange:function(a){return g(a.target.value)},placeholder:"My Awesome Article!",className:h().input}),(0,f.jsxs)("p",{children:[(0,f.jsx)("strong",{children:"Slug:"})," ",i]}),(0,f.jsx)("button",{type:"submit",disabled:!j,className:"btn-green",children:"Create New Post"})]})}},4468:function(a){a.exports={container:"Admin_container__7Kd1y",hidden:"Admin_hidden__blWKt",controls:"Admin_controls__RhTAv",input:"Admin_input__9_7r7",checkbox:"Admin_checkbox__Ttf_p"}},1163:function(a,b,c){a.exports=c(387)},6677:function(a,b,c){"use strict";c.d(b,{Kx:function(){return m},ky:function(){return p},Xi:function(){return q},iY:function(){return r}});var d=c(7294),e=c(5321),f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},g=function(a){return{loading:null==a,value:a}},h=function(a){var b=a?a():void 0,c=(0,d.useReducer)(function(a,b){switch(b.type){case"error":return f({},a,{error:b.error,loading:!1,value:void 0});case"reset":return g(b.defaultValue);case"value":return f({},a,{error:void 0,loading:!1,value:b.value});default:return a}},g(b)),e=c[0],h=c[1],i=function(){h({type:"reset",defaultValue:a?a():void 0})},j=function(a){h({type:"error",error:a})},k=function(a){h({type:"value",value:a})};return(0,d.useMemo)(function(){return{error:e.error,loading:e.loading,reset:i,setError:j,setValue:k,value:e.value}},[e.error,e.loading,i,j,k,e.value])},i=function(a,b,c){var e=(0,d.useRef)(a);return(0,d.useEffect)(function(){!b(a,e.current)&&(e.current=a,c&&c())}),e},j=function(a,b,c,d,e){if(a.exists()){var f=a.data(b);return e&&(f=e(f)),c&&(f[c]=a.id),d&&(f[d]=a.ref),f}},k=function(a,b){var c=!!a&&!!b&&(0,e.Eo)(a,b);return!a&&!b||c},l=function(a,b){var c=!!a&&!!b&&(0,e.iE)(a,b);return!a&&!b||c},m=function(a,b){return n(!0,a,b)},n=function(a,b,c){var f=h(),g=f.error,j=f.loading,k=f.reset,m=f.setError,n=f.setValue,p=f.value,q=i(b,l,k);(0,d.useEffect)(function(){if(!q.current){n(void 0);return}if(a){var b=c&&c.snapshotListenOptions?(0,e.cf)(q.current,c.snapshotListenOptions,n,m):(0,e.cf)(q.current,n,m);return function(){b()}}o(c?c.getOptions:void 0)(q.current).then(n).catch(m)},[q.current]);var r=[p,j,g,];return(0,d.useMemo)(function(){return r},r)};function o(a){var b=(void 0===a?{source:"default"}:a).source;switch(b){default:case"default":return e.PL;case"cache":return e.UQ;case"server":return e.zN}}var p=function(a,b){return s(!0,a,b)},q=function(a,b){return t(!0,a,b)},r=function(a,b){return t(!1,a,b)},s=function(a,b,c){var f=h(),g=f.error,j=f.loading,l=f.reset,m=f.setError,n=f.setValue,o=f.value,p=i(b,k,l);(0,d.useEffect)(function(){if(!p.current){n(void 0);return}if(a){var b=c&&c.snapshotListenOptions?(0,e.cf)(p.current,c.snapshotListenOptions,n,m):(0,e.cf)(p.current,n,m);return function(){b()}}u(c?c.getOptions:void 0)(p.current).then(n).catch(m)},[p.current]);var q=[o,j,g,];return(0,d.useMemo)(function(){return q},q)},t=function(a,b,c){var e=c?c.idField:void 0,f=c?c.refField:void 0,g=c?c.snapshotOptions:void 0,h=c?c.transform:void 0,i=s(a,b,c),k=i[0],l=i[1],m=i[2],n=(0,d.useMemo)(function(){return k?j(k,g,e,f,h):void 0},[k,g,e,f,h]),o=[n,l,m,];return(0,d.useMemo)(function(){return o},o)};function u(a){var b=(void 0===a?{source:"default"}:a).source;switch(b){default:case"default":return e.QT;case"cache":return e.kl;case"server":return e.Xk}}}},function(a){a.O(0,[774,888,179],function(){return a(a.s=8860)}),_N_E=a.O()}])